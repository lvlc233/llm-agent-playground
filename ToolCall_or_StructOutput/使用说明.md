# ä½¿ç”¨è¯´æ˜Ž

## é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ç”¨äºŽå¯¹æ¯”åˆ†æž **å·¥å…·è°ƒç”¨(Tool Call)** å’Œ **ç»“æž„åŒ–è¾“å‡º(Structured Output)** åœ¨LLMåº”ç”¨ä¸­æ€§èƒ½å·®å¼‚çš„å®žéªŒå¹³å°ã€‚é€šè¿‡ä¸€ç³»åˆ—æŽ§åˆ¶å®žéªŒï¼Œé‡åŒ–æ¯”è¾ƒä¸¤ç§æ–¹æ³•åœ¨tokenæ¶ˆè€—ã€å“åº”é€Ÿåº¦ã€å‚æ•°ç”Ÿæˆå‡†ç¡®çŽ‡ç­‰æ–¹é¢çš„è¡¨çŽ°ã€‚

### âœ¨ æ ¸å¿ƒç‰¹æ€§
- **ä¸­æ–‡æŽ§åˆ¶å°è¾“å‡º**ï¼šå®žéªŒè¿‡ç¨‹ã€ç»“æžœæ‘˜è¦ã€ç»Ÿè®¡ä¿¡æ¯å…¨éƒ¨ä¸­æ–‡æ˜¾ç¤º
- **CSVæ•°æ®æŒä¹…åŒ–**ï¼šè‡ªåŠ¨ç”ŸæˆCSVæ–‡ä»¶ä¿å­˜è¯¦ç»†å®žéªŒæ•°æ®
- **å®žéªŒå†…å®¹ä¿æŒè‹±æ–‡**ï¼šä¿æŒåŽŸæœ‰è‹±æ–‡å®žéªŒåœºæ™¯ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§
- **å¤šæ¨¡åž‹æ”¯æŒ**ï¼šæ”¯æŒSiliconFlowã€OpenAIç­‰å…¼å®¹APIçš„æœåŠ¡
- **çµæ´»é…ç½®**ï¼šæ”¯æŒè‡ªå®šä¹‰æ¨¡åž‹å‚æ•°ã€é‡è¯•ç­–ç•¥ç­‰

## ðŸŽ¯ å®žéªŒç›®æ ‡

1. **Tokenæ¶ˆè€—å¯¹æ¯”** - æµ‹é‡ä¸¤ç§æ–¹æ³•çš„è¾“å…¥è¾“å‡ºtokenä½¿ç”¨é‡
2. **å“åº”é€Ÿåº¦å¯¹æ¯”** - å¯¹æ¯”æ‰§è¡Œå»¶è¿Ÿå’Œå“åº”æ—¶é—´
3. **å‚æ•°ç”Ÿæˆå‡†ç¡®çŽ‡** - è¯„ä¼°å·¥å…·å‚æ•°ç”Ÿæˆçš„æ­£ç¡®æ€§
4. **å¤šå·¥å…·å¤„ç†æ€§èƒ½** - æµ‹è¯•æ‰¹å¤„ç†å’Œå¹¶å‘å·¥å…·è°ƒç”¨èƒ½åŠ›
5. **æž¶æž„æ¨¡å¼æ•ˆæžœ** - éªŒè¯åˆ†å±‚æž¶æž„å¯¹æ€§èƒ½çš„å½±å“

## ðŸ“‹ ç³»ç»Ÿè¦æ±‚

- **Pythonç‰ˆæœ¬**: >= 3.11, < 4.0
- **æ“ä½œç³»ç»Ÿ**: Windows/Linux/MacOS
- **ç½‘ç»œ**: éœ€è¦è®¿é—®LLM APIæœåŠ¡

## ðŸš€ å¿«é€Ÿå¼€å§‹

### 1. çŽ¯å¢ƒé…ç½®

#### å®‰è£…ä¾èµ–
```bash
# ä½¿ç”¨pipå®‰è£…
pip install -e .

# æˆ–ä½¿ç”¨uv
uv sync
```

#### é…ç½®APIå¯†é’¥
ç¼–è¾‘ `.env` æ–‡ä»¶ï¼š
```env
# å¿…éœ€ï¼šAPIé…ç½®
API_KEY=your_api_key_here
BASE_URL=https://api.siliconflow.cn/v1

# å¯é€‰ï¼šæ¨¡åž‹é€‰æ‹©ï¼ˆç”¨é€—å·åˆ†éš”å¤šä¸ªæ¨¡åž‹ï¼‰
MODEL_NAMES=Qwen/Qwen3-30B-A3B-Instruct-2507,moonshotai/Kimi-K2-Instruct-0905
```

**æ”¯æŒçš„APIæä¾›å•†**:
- SiliconFlowï¼ˆæŽ¨èï¼Œå›½å†…è®¿é—®ç¨³å®šï¼‰
- OpenAI
- ä»»ä½•å…¼å®¹OpenAI APIæ ¼å¼çš„æœåŠ¡

#### è¿è¡Œå‰æ£€æŸ¥
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬ï¼ˆéœ€è¦3.11+ï¼‰
python --version

# æ£€æŸ¥ä¾èµ–å®‰è£…
pip list | grep -E "(langchain|pydantic)"

# æµ‹è¯•APIè¿žæŽ¥
curl -H "Authorization: Bearer YOUR_API_KEY" \
     -H "Content-Type: application/json" \
     https://api.siliconflow.cn/v1/models
```


### 2. è¿è¡Œå®žéªŒ

#### å¤šæ¨¡åž‹æ‰¹é‡æµ‹è¯•ï¼ˆé»˜è®¤æ¨¡å¼ï¼‰
ç³»ç»Ÿä¼šè‡ªåŠ¨æµ‹è¯•`.env`æ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰æ¨¡åž‹ï¼š
```bash
# è¿è¡Œæ‰€æœ‰å®žéªŒï¼Œæµ‹è¯•æ‰€æœ‰é…ç½®çš„æ¨¡åž‹
python -m src.main

# å®žéªŒç»“æžœå°†ä¸ºæ¯ä¸ªæ¨¡åž‹ç”Ÿæˆç‹¬ç«‹çš„CSVæ–‡ä»¶
```

#### è¿è¡Œç‰¹å®šå®žéªŒ
```bash
# å®žéªŒ1ï¼šTokenæ¶ˆè€—å¯¹æ¯”ï¼ˆå¤šæ¨¡åž‹ï¼‰
python -m src.main --exp 1

# å®žéªŒ2ï¼šå¤šå·¥å…·æ‰¹å¤„ç†ï¼ˆå¤šæ¨¡åž‹ï¼‰
python -m src.main --exp 2

# å®žéªŒ3ï¼šåˆ†å±‚æž¶æž„å¯¹æ¯”ï¼ˆå¤šæ¨¡åž‹ï¼‰
python -m src.main --exp 3
```

#### æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯
```bash
python -m src.main --help
```

#### ä½¿ç”¨å¯åŠ¨å™¨ï¼ˆå¤‡ç”¨æ–¹æ¡ˆï¼‰
```bash
python run_experiments.py
```

## ðŸ“Š å®žéªŒè¯¦è§£

### å®žéªŒ1ï¼šTokenæ¶ˆè€—ä¸ŽåŸºç¡€æå–
**æ–‡ä»¶**: `src/experiments/exp1_token_consumption.py`

**åœºæ™¯**: ä»Žç”¨æˆ·æè¿°ä¸­æå–ä¸ªäººèµ„æ–™ä¿¡æ¯
- **è¾“å…¥**: "My name is Alice, I am 30 years old, and my email is alice@example.com. I love coding python and hiking."
- **æ–¹æ³•Aï¼ˆTool Callï¼‰**: ä½¿ç”¨`bind_tools()`ç»‘å®šæå–å·¥å…·
- **æ–¹æ³•Bï¼ˆStructured Outputï¼‰**: ä½¿ç”¨`with_structured_output()`ç›´æŽ¥è§£æž
- **å¤šæ¨¡åž‹æ”¯æŒ**: è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰é…ç½®çš„æ¨¡åž‹ï¼Œç”Ÿæˆå¯¹æ¯”æŠ¥å‘Š

**è¾“å‡ºæŒ‡æ ‡**:
```
==================== å®žéªŒæ‘˜è¦ ====================
å®žéªŒåç§°: Tokenæ¶ˆè€—ä¸ŽåŸºç¡€æå–å¯¹æ¯”
æ¨¡åž‹åç§°: Qwen/Qwen3-30B-A3B-Instruct-2507
æµ‹è¯•æ—¶é—´: 2025-12-04 17:30:45
æ–¹æ³•               | è¾“å…¥Token   | è¾“å‡ºToken   | å»¶è¿Ÿ(ç§’)    | çŠ¶æ€
å·¥å…·è°ƒç”¨            | 156        | 42         | 0.5234     | æˆåŠŸ
ç»“æž„åŒ–è¾“å‡º          | 89         | 31         | 0.3892     | æˆåŠŸ
================================================

å®žéªŒç»“æžœå·²ä¿å­˜åˆ°: å®žéªŒç»“æžœ/Tokenæ¶ˆè€—ä¸ŽåŸºç¡€æå–å¯¹æ¯”_20251204_173045.csv
```

**CSVæ–‡ä»¶å†…å®¹**:
å®žéªŒç»“æžœä¼šè‡ªåŠ¨ä¿å­˜ä¸ºCSVæ–‡ä»¶ï¼ŒåŒ…å«ä»¥ä¸‹åˆ—ï¼š
- Experiment Name: å®žéªŒåç§°
- Method Name: æ–¹æ³•åç§°
- Model Name: æ¨¡åž‹åç§°
- Input Tokens: è¾“å…¥Tokenæ•°
- Output Tokens: è¾“å‡ºTokenæ•°
- Total Tokens: æ€»Tokenæ•°
- Latency (Seconds): å“åº”å»¶è¿Ÿ
- Success: æˆåŠŸçŠ¶æ€ï¼ˆSuccess/Failedï¼‰
- Error Message: é”™è¯¯ä¿¡æ¯
- Test Time: æµ‹è¯•æ—¶é—´

### å®žéªŒ2ï¼šå¤šå·¥å…·æ‰¹å¤„ç†æ€§èƒ½
**æ–‡ä»¶**: `src/experiments/exp2_multi_tool.py`

**åœºæ™¯**: åŒæ—¶æŸ¥è¯¢å¤šä¸ªåŸŽå¸‚å¤©æ°”
- **è¾“å…¥**: "Please check the weather for Tokyo, New York, and London."
- **æ–¹æ³•Aï¼ˆTool Callï¼‰**: ä¾èµ–æ¨¡åž‹ç”Ÿæˆå¤šä¸ªtool_calls
- **æ–¹æ³•Bï¼ˆStructured Outputï¼‰**: å¼ºåˆ¶æ‰¹å¤„ç†Listç»“æž„
- **å¤šæ¨¡åž‹æ”¯æŒ**: è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰é…ç½®çš„æ¨¡åž‹ï¼Œå¯¹æ¯”æ‰¹å¤„ç†æ€§èƒ½

**å…³é”®å¯¹æ¯”**:
- æ‰¹å¤„ç†ä¸€è‡´æ€§ï¼ˆæ˜¯å¦èƒ½ä¸€æ¬¡ç”Ÿæˆæ‰€æœ‰æŸ¥è¯¢ï¼‰
- Tokenæ•ˆçŽ‡ï¼ˆåˆ—è¡¨å¤„ç†vså¤šæ¬¡è°ƒç”¨ï¼‰
- å“åº”é€Ÿåº¦ï¼ˆå¹¶å‘vsä¸²è¡Œï¼‰

### å®žéªŒ3ï¼šåˆ†å±‚æž¶æž„æ•ˆæžœ
**æ–‡ä»¶**: `src/experiments/exp3_layered_architecture.py`

**åœºæ™¯**: å¤šå·¥å…·é€‰æ‹©åœºæ™¯ï¼ˆæœç´¢ã€è®¡ç®—ã€ç™¾ç§‘ï¼‰
- **æ–¹æ³•Aï¼ˆæ ‡å‡†å·¥å…·è°ƒç”¨ï¼‰**: ä¸€æ¬¡æ€§ç»‘å®šæ‰€æœ‰å·¥å…·
- **æ–¹æ³•Bï¼ˆåˆ†å±‚æž¶æž„ï¼‰**:
  1. å…ˆé€‰æ‹©æœ€ä½³å·¥å…·ï¼ˆè½»é‡çº§schemaï¼‰
  2. å†ç”Ÿæˆå‚æ•°ï¼ˆä¸“ç”¨schemaï¼‰
- **å¤šæ¨¡åž‹æ”¯æŒ**: è‡ªåŠ¨æµ‹è¯•æ‰€æœ‰é…ç½®çš„æ¨¡åž‹ï¼Œå¯¹æ¯”æž¶æž„æ•ˆæžœ

**æž¶æž„ä¼˜åŠ¿**:
- å‡å°‘ä¸Šä¸‹æ–‡æ±¡æŸ“
- é™ä½Žtokenæ¶ˆè€—
- æé«˜é€‰æ‹©å‡†ç¡®æ€§

## ðŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰æ¨¡åž‹é…ç½®
åœ¨`.env`æ–‡ä»¶ä¸­æ·»åŠ ï¼š
```env
# è‡ªå®šä¹‰æ¨¡åž‹å‚æ•°
TEMPERATURE=0.7
MAX_TOKENS=2000
TIMEOUT=30

# é‡è¯•é…ç½®
MAX_RETRIES=3
RETRY_DELAY=1.0
```

### æ·»åŠ æ–°å®žéªŒ
1. åœ¨`src/experiments/`åˆ›å»ºæ–°å®žéªŒæ–‡ä»¶
2. å®žçŽ°`run_experiment()`å‡½æ•°
3. åœ¨`src/main.py`ä¸­æ³¨å†Œæ–°å®žéªŒ

**æ¨¡æ¿**:
```python
# src/experiments/exp4_custom.py
import time
from src.utils.llm_factory import get_llm
from src.utils.metrics import MetricsTracker

def run_experiment():
    llm = get_llm()
    tracker = MetricsTracker()

    # ä½ çš„å®žéªŒé€»è¾‘
    # ...

    tracker.print_summary()
```

## ðŸ“ˆ ç»“æžœè§£è¯»

### å…³é”®æŒ‡æ ‡è¯´æ˜Ž

| æŒ‡æ ‡ | å«ä¹‰ | ä¼˜åŒ–å»ºè®® |
|------|------|----------|
| **Input Tokens** | è¾“å…¥tokenæ•° | å‡å°‘ç³»ç»Ÿæç¤ºè¯ï¼Œä½¿ç”¨æ›´ç®€æ´çš„schema |
| **Output Tokens** | è¾“å‡ºtokenæ•° | ä¼˜åŒ–è¾“å‡ºæ ¼å¼ï¼Œå‡å°‘å†—ä½™å­—æ®µ |
| **Latency** | å“åº”å»¶è¿Ÿ | é€‰æ‹©æ›´å¿«çš„æ¨¡åž‹ï¼Œä¼˜åŒ–ç½‘ç»œé…ç½® |
| **Success Rate** | æˆåŠŸçŽ‡ | è°ƒä¼˜æç¤ºè¯ï¼Œå®Œå–„é”™è¯¯å¤„ç† |

### æ€§èƒ½å¯¹æ¯”åŸºå‡†

åŸºäºŽå®žéªŒç»“æžœçš„ä¸€èˆ¬æ€§å»ºè®®ï¼š

1. **Tokenæ¶ˆè€—**: ç»“æž„åŒ–è¾“å‡ºé€šå¸¸æ¯”å·¥å…·è°ƒç”¨èŠ‚çœ20-40%çš„token
2. **å“åº”é€Ÿåº¦**: ç»“æž„åŒ–è¾“å‡ºå“åº”é€Ÿåº¦é€šå¸¸å¿«10-30%
3. **å‡†ç¡®çŽ‡**: å·¥å…·è°ƒç”¨åœ¨å¤æ‚å‚æ•°ç”Ÿæˆä¸Šå‡†ç¡®çŽ‡æ›´é«˜
4. **å¤šå·¥å…·åœºæ™¯**: ç»“æž„åŒ–è¾“å‡ºåœ¨æ‰¹å¤„ç†åœºæ™¯ä¸‹æ›´æœ‰ä¼˜åŠ¿

## ðŸš€ å¤šæ¨¡åž‹æµ‹è¯•åŠŸèƒ½

### è‡ªåŠ¨å¤šæ¨¡åž‹æµ‹è¯•
ç³»ç»Ÿé»˜è®¤ä¼šæµ‹è¯•`.env`æ–‡ä»¶ä¸­é…ç½®çš„æ‰€æœ‰æ¨¡åž‹ï¼Œæ— éœ€æ‰‹åŠ¨æŒ‡å®šï¼š

```bash
# é…ç½®å¤šä¸ªæ¨¡åž‹ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰
MODEL_NAMES=Qwen/Qwen3-30B-A3B-Instruct-2507,moonshotai/Kimi-K2-Instruct-0905,deepseek-ai/DeepSeek-R1

# è¿è¡Œå®žéªŒï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨æµ‹è¯•æ‰€æœ‰æ¨¡åž‹
python -m src.main
```

### å¤šæ¨¡åž‹æµ‹è¯•è¾“å‡º
è¿è¡Œæ—¶ä¼šæ˜¾ç¤ºï¼š
```
å¯ç”¨æ¨¡åž‹: Qwen/Qwen3-30B-A3B-Instruct-2507, moonshotai/Kimi-K2-Instruct-0905, deepseek-ai/DeepSeek-R1
æµ‹è¯•æ¨¡åž‹æ•°é‡: 3

æ¨¡åž‹ 1/3: Qwen/Qwen3-30B-A3B-Instruct-2507
----------------------------------------
[å®žéªŒè¿è¡Œä¸­...]

æ¨¡åž‹ 2/3: moonshotai/Kimi-K2-Instruct-0905
----------------------------------------
[å®žéªŒè¿è¡Œä¸­...]

æ¨¡åž‹ 3/3: deepseek-ai/DeepSeek-R1
----------------------------------------
[å®žéªŒè¿è¡Œä¸­...]

å¤šæ¨¡åž‹æ€§èƒ½å¯¹æ¯”æ±‡æ€»:
æ¨¡åž‹                           æ–¹æ³•           å¹³å‡Token   å¹³å‡å»¶è¿Ÿ    æˆåŠŸçŽ‡
Qwen/Qwen3-30B-A3B-Instruct-2507 å·¥å…·è°ƒç”¨        198        0.523      100.0%
moonshotai/Kimi-K2-Instruct-0905 å·¥å…·è°ƒç”¨        156        0.412      100.0%
deepseek-ai/DeepSeek-R1         å·¥å…·è°ƒç”¨        234        0.689      95.0%
...
```

### å¤šæ¨¡åž‹æµ‹è¯•ç»“æžœæ–‡ä»¶
- æ¯ä¸ªæ¨¡åž‹ç”Ÿæˆç‹¬ç«‹çš„CSVæ–‡ä»¶ï¼š
  `å¤šæ¨¡åž‹_{æ¨¡åž‹åç§°}_{æ—¶é—´æˆ³}.csv`
- ç»¼åˆå¯¹æ¯”ç»“æžœï¼š
  `å¤šæ¨¡åž‹ç»¼åˆå¯¹æ¯”_{æ—¶é—´æˆ³}.csv`

### æ€§èƒ½åˆ†æž
ç³»ç»Ÿè‡ªåŠ¨è®¡ç®—ï¼š
- å„æ¨¡åž‹åœ¨ä¸åŒæ–¹æ³•ä¸‹çš„å¹³å‡æ€§èƒ½
- è·¨æ¨¡åž‹çš„æ€§èƒ½æ ‡å‡†å·®
- æœ€ä¼˜æ¨¡åž‹æŽ¨è

## ðŸ“ å®žéªŒç»“æžœç®¡ç†

### CSVæ–‡ä»¶è¯´æ˜Ž
æ¯æ¬¡å®žéªŒè¿è¡ŒåŽï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨ç”ŸæˆCSVæ–‡ä»¶ä¿å­˜è¯¦ç»†æ•°æ®ï¼š

**æ–‡ä»¶ä½ç½®**: `å®žéªŒç»“æžœ/` ç›®å½•ä¸‹
**æ–‡ä»¶å‘½å**: `{å®žéªŒåç§°}_{æ—¶é—´æˆ³}.csv`
**ç¼–ç æ ¼å¼**: UTF-8ï¼Œæ”¯æŒä¸­è‹±æ–‡

### CSVåˆ—è¯´æ˜Ž
| åˆ—å | è¯´æ˜Ž | ç¤ºä¾‹ |
|------|------|------|
| Experiment Name | å®žéªŒåç§° | "Tokenæ¶ˆè€—ä¸ŽåŸºç¡€æå–å¯¹æ¯”" |
| Method Name | æ–¹æ³•åç§° | "å·¥å…·è°ƒç”¨" / "ç»“æž„åŒ–è¾“å‡º" |
| Model Name | æ¨¡åž‹åç§° | "Qwen/Qwen3-30B-A3B-Instruct-2507" |
| Input Tokens | è¾“å…¥Tokenæ•° | 156 |
| Output Tokens | è¾“å‡ºTokenæ•° | 42 |
| Total Tokens | æ€»Tokenæ•° | 198 |
| Latency (Seconds) | å“åº”å»¶è¿Ÿ(ç§’) | 0.5234 |
| Success | æˆåŠŸçŠ¶æ€ | "Success" / "Failed" |
| Error Message | é”™è¯¯ä¿¡æ¯ | ç©ºå€¼æˆ–å…·ä½“é”™è¯¯æè¿° |
| Test Time | æµ‹è¯•æ—¶é—´ | "2025-12-04 17:30:45" |

### æ•°æ®åˆ†æžå»ºè®®
1. **å¯¹æ¯”åˆ†æž**: ä½¿ç”¨Excelæˆ–Python pandasåŠ è½½CSVæ–‡ä»¶è¿›è¡Œå¯¹æ¯”
2. **æ‰¹é‡å¤„ç†**: å¤šä¸ªCSVæ–‡ä»¶å¯ä»¥åˆå¹¶åˆ†æžé•¿æœŸè¶‹åŠ¿
3. **å¯è§†åŒ–**: åŸºäºŽCSVæ•°æ®ç”Ÿæˆå›¾è¡¨ï¼Œç›´è§‚å±•ç¤ºæ€§èƒ½å·®å¼‚

```python
import pandas as pd
import matplotlib.pyplot as plt

# è¯»å–CSVæ–‡ä»¶
df = pd.read_csv('å®žéªŒç»“æžœ/Tokenæ¶ˆè€—ä¸ŽåŸºç¡€æå–å¯¹æ¯”_20251204_173045.csv')

# å¯¹æ¯”ä¸¤ç§æ–¹æ³•çš„Tokenæ¶ˆè€—
methods = df['Method Name']
tokens = df['Total Tokens']

plt.bar(methods, tokens)
plt.title('Tokenæ¶ˆè€—å¯¹æ¯”')
plt.xlabel('æ–¹æ³•')
plt.ylabel('æ€»Tokenæ•°')
plt.show()
```

## ðŸ”„ è¾“å‡ºç‰¹æ€§è¯´æ˜Ž

### ä¸­è‹±æ–‡åˆ†ç¦»è®¾è®¡
- **æŽ§åˆ¶å°è¾“å‡º**: å®Œå…¨ä¸­æ–‡åŒ–ï¼ŒåŒ…æ‹¬å®žéªŒæ ‡é¢˜ã€çŠ¶æ€ä¿¡æ¯ã€ç»“æžœæ‘˜è¦
- **CSVæ–‡ä»¶**: ä½¿ç”¨è‹±æ–‡åˆ—åï¼Œä¾¿äºŽæ•°æ®å¤„ç†å’Œåˆ†æž
- **å®žéªŒå†…å®¹**: ä¿æŒè‹±æ–‡åœºæ™¯ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§

### æŽ§åˆ¶å°è¾“å‡ºç¤ºä¾‹
```
==================== å®žéªŒæ‘˜è¦ ====================
å®žéªŒåç§°: Tokenæ¶ˆè€—ä¸ŽåŸºç¡€æå–å¯¹æ¯”
æ¨¡åž‹åç§°: Qwen/Qwen3-30B-A3B-Instruct-2507
æµ‹è¯•æ—¶é—´: 2025-12-04 17:30:45
æ–¹æ³•               | è¾“å…¥Token   | è¾“å‡ºToken   | å»¶è¿Ÿ(ç§’)    | çŠ¶æ€
å·¥å…·è°ƒç”¨            | 156        | 42         | 0.5234     | æˆåŠŸ
ç»“æž„åŒ–è¾“å‡º          | 89         | 31         | 0.3892     | æˆåŠŸ
================================================

å®žéªŒç»“æžœå·²ä¿å­˜åˆ°: å®žéªŒç»“æžœ/Tokenæ¶ˆè€—ä¸ŽåŸºç¡€æå–å¯¹æ¯”_20251204_173045.csv
```

### é”™è¯¯å¤„ç†
- è¯¦ç»†çš„é”™è¯¯ä¿¡æ¯å’Œä¸­æ–‡æç¤º
- å¼‚å¸¸æƒ…å†µçš„å‹å¥½å¤„ç†
- é‡è¯•æœºåˆ¶å’Œæ•°æ®å®Œæ•´æ€§ä¿éšœ

### Q: å®žéªŒè¿è¡Œå¤±è´¥æ€Žä¹ˆåŠžï¼Ÿ
**A**: æ£€æŸ¥ä»¥ä¸‹å‡ ç‚¹ï¼š
1. APIå¯†é’¥æ˜¯å¦æ­£ç¡®é…ç½®
2. ç½‘ç»œè¿žæŽ¥æ˜¯å¦æ­£å¸¸
3. Pythonç‰ˆæœ¬æ˜¯å¦ç¬¦åˆè¦æ±‚
4. ä¾èµ–åŒ…æ˜¯å¦å®Œæ•´å®‰è£…

### Q: Tokenè®¡æ•°ä¸å‡†ç¡®ï¼Ÿ
**A**: ä¸åŒæ¨¡åž‹å’ŒAPIæä¾›å•†çš„tokenè®¡ç®—æ–¹å¼å¯èƒ½ä¸åŒï¼Œç¡®ä¿ï¼š
1. ä½¿ç”¨æœ€æ–°ç‰ˆæœ¬çš„LangChain
2. æ£€æŸ¥APIå“åº”ä¸­çš„usage_metadataå­—æ®µ
3. å¯¹æ¯”å¤šä¸ªæ ·æœ¬å–å¹³å‡å€¼

### Q: å¦‚ä½•æ·»åŠ è‡ªå®šä¹‰å·¥å…·ï¼Ÿ
**A**: å‚è€ƒçŽ°æœ‰å·¥å…·å®šä¹‰ï¼š
```python
from langchain_core.tools import tool
from pydantic import BaseModel

@tool
def your_custom_tool(param1: str, param2: int):
    """å·¥å…·æè¿°ï¼Œç”¨äºŽLLMç†è§£"""
    # å·¥å…·é€»è¾‘
    return result
```

## ðŸ”„ æ‰©å±•å¼€å‘

### æ·»åŠ æ–°æ¨¡åž‹æ”¯æŒ
ç¼–è¾‘`src/utils/llm_factory.py`ï¼š
```python
def get_custom_llm(model_name: str, api_key: str):
    # è‡ªå®šä¹‰LLMåˆå§‹åŒ–é€»è¾‘
    return ChatOpenAI(
        model=model_name,
        api_key=api_key,
        base_url="your_api_endpoint"
    )
```

### è‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡
æ‰©å±•`src/utils/metrics.py`ï¼š
```python
def calculate_custom_metric(results):
    """è®¡ç®—è‡ªå®šä¹‰è¯„ä¼°æŒ‡æ ‡"""
    # ä½ çš„è¯„ä¼°é€»è¾‘
    return metric_value
```

## ðŸ“š ç›¸å…³æ–‡æ¡£

- [LangChainå®˜æ–¹æ–‡æ¡£](https://python.langchain.com/)
- [Pydanticæ–‡æ¡£](https://docs.pydantic.dev/)
- [OpenAI APIæ–‡æ¡£](https://platform.openai.com/docs/)

## ðŸ¤ è´¡çŒ®æŒ‡å—

1. Forké¡¹ç›®ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ï¼š`git checkout -b feature/new-experiment`
3. æäº¤æ›´æ”¹ï¼š`git commit -am 'Add new experiment'`
4. æŽ¨é€åˆ†æ”¯ï¼š`git push origin feature/new-experiment`
5. æäº¤Pull Request

## ðŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](LICENSE) æ–‡ä»¶

## ðŸ“ž è”ç³»æ–¹å¼

- **ä½œè€…**: æŽå­åœ¨
- **é‚®ç®±**: lxz233556@gmail.com
- **é¡¹ç›®åœ°å€**: [GitHub Repository](https://github.com/your-repo/ToolCall_or_StructOutput)

---

**æœ€åŽæ›´æ–°**: 2025å¹´12æœˆ
**æ–‡æ¡£ç‰ˆæœ¬**: v1.0